--[[
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    AUTO FISHING SYSTEM v7.0 - CONFIG-BASED (NO GUI)

    This is the main script loaded from GitHub via config_loader.lua

    Features:
    - Auto Farm V1 (Standard fishing with custom delay)
    - Auto Farm V2 (Jung Fast - independent loop)
    - Auto Sell (Automatic item selling)
    - Auto Artifact (4 temple farming)
    - Auto Weather (Wind, Cloudy, Storm)
    - Auto Upgrade (Rod & Bait auto-purchase)
    - Freeze Character (Anti-drown)
    - GPU Saver (White screen overlay)
    - Disable Animations (Performance boost)
    - Remove Islands (Remove island models)
    - Unlock FPS (Set FPS cap to 240)
    - Webhook (Discord notifications)

    REMOVED MODULES (from v6.7):
    âœ˜ Auto Totem
    âœ˜ Auto Megalodon
    âœ˜ Auto Quest
    âœ˜ WindUI (replaced with config system)

    Configuration:
    All settings are controlled via _G.AutoFishConfig from config_loader.lua

    Usage:
    1. Edit config_loader.lua with your settings
    2. Execute: loadstring(readfile("config_loader.lua"))()
    3. Main script loads from GitHub and applies your config
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

print(string.rep("=", 80))
print("ğŸš€ AUTO FISHING SYSTEM v7.0 - CONFIG-BASED")
print("ğŸ“¦ Loading from GitHub...")
print(string.rep("=", 80))

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 1: CONFIG VALIDATION & SETUP
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Check if config exists
if not _G.AutoFishConfig then
    warn("âŒ ERROR: _G.AutoFishConfig not found!")
    warn("âŒ Please execute config_loader.lua first!")
    return
end

print("\nâœ… Configuration detected!")
print("ğŸ“‹ Loading config values...\n")

-- Extract config values
local config = _G.AutoFishConfig

-- Auto Farm V1 settings
_G.AUTO_FARM_ENABLED = config["Auto Farm"]["Auto Farm V1"]["Enabled"]
_G.FARM_SUCCESS_DELAY = config["Auto Farm"]["Auto Farm V1"]["Success Delay"]

-- Auto Farm V2 settings
_G.AUTO_FARM_V2_ENABLED = config["Auto Farm"]["Auto Farm V2"]["Enabled"]
_G.JUNG_V2_STATE = {
    isRunning = false,
    baseDelayReel = config["Auto Farm"]["Auto Farm V2"]["Base Delay Reel"],
    baseDelayComplete = config["Auto Farm"]["Auto Farm V2"]["Base Delay Complete"],
    fishCaught = 0,
    cycleCount = 0,
    totalRequests = 0,
    pendingCompletes = 0,
    startTime = 0,
}

-- Auto Sell settings
_G.AUTO_SELL_ENABLED = config["Auto Sell"]["Enabled"]
_G.AUTO_SELL_DELAY = config["Auto Sell"]["Delay"]

-- Auto Artifact settings
_G.AUTO_ARTIFACT_ENABLED = config["Auto Artifact"]["Enabled"]
_G.SKIP_HOURGLASS_DIAMOND = config["Auto Artifact"]["Skip Hourglass Diamond"]
_G.SKIP_ARROW_ARTIFACT = config["Auto Artifact"]["Skip Arrow Artifact"]
_G.SKIP_DIAMOND_ARTIFACT = config["Auto Artifact"]["Skip Diamond Artifact"]
_G.SKIP_CRESCENT_ARTIFACT = config["Auto Artifact"]["Skip Crescent Artifact"]

-- Auto Weather settings
_G.AUTO_WEATHER_ENABLED = config["Auto Weather"]["Enabled"]
_G.WEATHER_PURCHASE_DELAY = config["Auto Weather"]["Purchase Delay"]

-- Auto Upgrade settings
_G.AUTO_UPGRADE_ROD_ENABLED = config["Auto Upgrade"]["Auto Upgrade Rod"]
_G.AUTO_UPGRADE_BAIT_ENABLED = config["Auto Upgrade"]["Auto Upgrade Bait"]

-- Misc settings
_G.FREEZE_CHAR_ENABLED = config["Misc"]["Freeze Character"]
_G.GPU_SAVER_ENABLED = config["Misc"]["GPU Saver"]
_G.DISABLE_ANIMATIONS_ENABLED = config["Misc"]["Disable Animations"]
_G.REMOVE_ISLANDS_ENABLED = config["Misc"]["Remove Islands"] or false
_G.UNLOCK_FPS_ENABLED = config["Misc"]["Unlock FPS"] or false

-- Webhook settings
_G.WEBHOOK_ENABLED = config["Webhook"]["Enabled"]
_G.WEBHOOK_URL = config["Webhook"]["URL"]

print("âœ… Config values loaded successfully!\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 2: DEPENDENCIES & GAME SERVICES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading game services...")

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Network & RemoteEvents
local Net = ReplicatedStorage:WaitForChild("Network")
local EquipToolEvent = Net:WaitForChild("RF/EquipTool")
local ChargeEvent = Net:WaitForChild("RF/StartCharging")
local RequestEvent = Net:WaitForChild("RF/RequestFishingMinigame")
local CompletedEvent = Net:WaitForChild("RE/CompletedFishingMinigame")
local CancelEvent = Net:WaitForChild("RF/StopCharging")

-- PlayerData
local PlayerData = require(ReplicatedStorage:WaitForChild("Modules"):WaitForChild("PlayerData"))

-- Session stats for GPU Saver
local sessionStats = {
    totalFish = 0,
    totalValue = 0,
    startTime = tick()
}

print("âœ… Game services loaded\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 3: GPU SAVER MODULE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading GPU Saver module...")

local gpuSaverActive = false
local gpuSaverConnection = nil
local whiteScreenGui = nil

local function createWhiteScreen()
    if whiteScreenGui then
        return
    end

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "WhiteScreenOverlay"
    screenGui.IgnoreGuiInset = true
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.Parent = player:WaitForChild("PlayerGui")

    local whiteFrame = Instance.new("Frame")
    whiteFrame.Name = "WhiteFrame"
    whiteFrame.Size = UDim2.new(1, 0, 1, 0)
    whiteFrame.Position = UDim2.new(0, 0, 0, 0)
    whiteFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    whiteFrame.BorderSizePixel = 0
    whiteFrame.ZIndex = 999999
    whiteFrame.Parent = screenGui

    local statsLabel = Instance.new("TextLabel")
    statsLabel.Name = "StatsLabel"
    statsLabel.Size = UDim2.new(0, 400, 0, 200)
    statsLabel.Position = UDim2.new(0.5, -200, 0.5, -100)
    statsLabel.BackgroundTransparency = 1
    statsLabel.TextColor3 = Color3.fromRGB(0, 0, 0)
    statsLabel.Font = Enum.Font.SourceSansBold
    statsLabel.TextSize = 18
    statsLabel.ZIndex = 1000000
    statsLabel.Parent = whiteFrame

    whiteScreenGui = screenGui

    return statsLabel
end

local function updateStatsDisplay()
    if not whiteScreenGui then return end

    local statsLabel = whiteScreenGui.WhiteFrame:FindFirstChild("StatsLabel")
    if not statsLabel then return end

    local elapsedTime = tick() - sessionStats.startTime
    local hours = math.floor(elapsedTime / 3600)
    local minutes = math.floor((elapsedTime % 3600) / 60)
    local seconds = math.floor(elapsedTime % 60)

    local statsText = string.format(
        "ğŸ£ AUTO FISHING SYSTEM v7.0\n\n" ..
        "â±ï¸ Runtime: %02d:%02d:%02d\n" ..
        "ğŸŸ Fish Caught: %d\n" ..
        "ğŸ’° Total Value: $%s\n\n" ..
        "GPU SAVER MODE ACTIVE\n" ..
        "Press F9 to view console",
        hours, minutes, seconds,
        sessionStats.totalFish,
        tostring(sessionStats.totalValue)
    )

    statsLabel.Text = statsText
end

local function startGPUSaver()
    if gpuSaverActive then
        print("âš ï¸ GPU Saver already active")
        return
    end

    gpuSaverActive = true

    local statsLabel = createWhiteScreen()
    updateStatsDisplay()

    gpuSaverConnection = RunService.RenderStepped:Connect(function()
        game:GetService("RunService"):Set3dRenderingEnabled(false)
        updateStatsDisplay()
    end)

    print("âœ… GPU Saver ENABLED - White screen active")
end

local function stopGPUSaver()
    if not gpuSaverActive then
        print("âš ï¸ GPU Saver not active")
        return
    end

    gpuSaverActive = false

    if gpuSaverConnection then
        gpuSaverConnection:Disconnect()
        gpuSaverConnection = nil
    end

    if whiteScreenGui then
        whiteScreenGui:Destroy()
        whiteScreenGui = nil
    end

    game:GetService("RunService"):Set3dRenderingEnabled(true)

    print("âœ… GPU Saver DISABLED")
end

print("âœ… GPU Saver module ready\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 4: WEBHOOK MODULE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading Webhook module...")

local function sendWebhook(title, description, color, fields)
    if not _G.WEBHOOK_ENABLED or not _G.WEBHOOK_URL or _G.WEBHOOK_URL == "" then
        return
    end

    local embed = {
        title = title,
        description = description,
        color = color,
        fields = fields or {},
        timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ"),
        footer = {
            text = "Auto Fishing System v7.0"
        }
    }

    local payload = {
        username = "Auto Fish Bot",
        embeds = {embed}
    }

    local success, err = pcall(function()
        local response = request({
            Url = _G.WEBHOOK_URL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode(payload)
        })
    end)

    if not success then
        warn("âŒ Webhook send failed: " .. tostring(err))
    end
end

print("âœ… Webhook module ready\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 5: FREEZE CHARACTER MODULE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading Freeze Character module...")

local freezeConnection = nil
local frozenPosition = nil
local bodyPosition = nil

local function startFreeze()
    if freezeConnection then
        print("âš ï¸ Freeze already active")
        return
    end

    local char = player.Character
    if not char then
        warn("âŒ Character not found")
        return
    end

    local rootPart = char:FindFirstChild("HumanoidRootPart")
    if not rootPart then
        warn("âŒ HumanoidRootPart not found")
        return
    end

    frozenPosition = rootPart.Position

    bodyPosition = Instance.new("BodyPosition")
    bodyPosition.Position = frozenPosition
    bodyPosition.MaxForce = Vector3.new(999999, 999999, 999999)
    bodyPosition.P = 50000
    bodyPosition.D = 1000
    bodyPosition.Parent = rootPart

    freezeConnection = RunService.Heartbeat:Connect(function()
        if not char or not char.Parent then
            stopFreeze()
            return
        end

        if not rootPart or not rootPart.Parent then
            stopFreeze()
            return
        end

        local humanoid = char:FindFirstChildWhichIsA("Humanoid")
        if humanoid and humanoid.Health <= 0 then
            stopFreeze()
            return
        end

        if bodyPosition and bodyPosition.Parent then
            local currentPos = rootPart.Position
            local yDrift = math.abs(currentPos.Y - frozenPosition.Y)
            local overallDrift = (currentPos - frozenPosition).Magnitude

            if yDrift > 0.5 or overallDrift > 2 then
                bodyPosition.Position = frozenPosition
            end
        end
    end)

    print("âœ… Freeze Character ENABLED")
end

local function stopFreeze()
    if freezeConnection then
        freezeConnection:Disconnect()
        freezeConnection = nil
    end

    if bodyPosition then
        bodyPosition:Destroy()
        bodyPosition = nil
    end

    frozenPosition = nil
    print("âœ… Freeze Character DISABLED")
end

print("âœ… Freeze Character module ready\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 6: DISABLE ANIMATIONS MODULE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading Disable Animations module...")

local animationHooksInstalled = false
local originalAnimationController = nil

local FISHING_ANIMATIONS = {
    "StartRodCharge", "LoopedRodCharge", "RodThrow",
    "ReelIntermission", "ReelStart", "FishCaught",
    "FishingFailure", "EquipIdle", "EquipIdleFake",
    "HoldFish", "IdleLoop", "WalkLoop"
}

local function installAnimationHooks()
    if animationHooksInstalled then
        return
    end

    local char = player.Character
    if not char then return end

    local humanoid = char:FindFirstChildWhichIsA("Humanoid")
    if not humanoid then return end

    local animController = humanoid:FindFirstChildWhichIsA("AnimationController") or humanoid:FindFirstChildWhichIsA("Animator")
    if not animController then return end

    originalAnimationController = animController

    local function isFishingAnimation(animationName)
        if not animationName then return false end
        for _, fishAnim in ipairs(FISHING_ANIMATIONS) do
            if animationName:find(fishAnim) then
                return true
            end
        end
        return false
    end

    local oldLoadAnimation = animController.LoadAnimation
    animController.LoadAnimation = function(self, animation)
        local track = oldLoadAnimation(self, animation)

        if animation and animation.Name and isFishingAnimation(animation.Name) then
            local oldPlay = track.Play
            track.Play = function(...)
                return
            end
        end

        return track
    end

    animationHooksInstalled = true
    print("âœ… Animation hooks installed")
end

local function removeAnimationHooks()
    if not animationHooksInstalled then
        return
    end

    animationHooksInstalled = false
    print("âœ… Animation hooks removed")
end

local function deleteAllAnimations()
    local char = player.Character
    if not char then return end

    local humanoid = char:FindFirstChildWhichIsA("Humanoid")
    if not humanoid then return end

    local animator = humanoid:FindFirstChildWhichIsA("Animator")
    if animator then
        for _, track in ipairs(animator:GetPlayingAnimationTracks()) do
            track:Stop(0)
            track:Destroy()
        end

        for _, child in ipairs(animator:GetChildren()) do
            if child:IsA("AnimationTrack") then
                child:Stop(0)
                child:Destroy()
            end
        end
    end

    for _, desc in ipairs(char:GetDescendants()) do
        if desc:IsA("Animation") then
            desc:Destroy()
        end
    end

    print("âœ… All animations deleted")
end

local function startDisableAnimations()
    if _G.DISABLE_ANIMATIONS_ENABLED then
        installAnimationHooks()
        deleteAllAnimations()
    end
end

local function stopDisableAnimations()
    removeAnimationHooks()
end

player.CharacterAdded:Connect(function(newChar)
    character = newChar
    task.wait(1)
    if _G.DISABLE_ANIMATIONS_ENABLED then
        installAnimationHooks()
        deleteAllAnimations()
    end
end)

print("âœ… Disable Animations module ready\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 7: AUTO UPGRADE MODULE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading Auto Upgrade module...")

local upgradeState = {
    rod = {
        running = false,
        lastPurchaseTime = 0,
        purchaseCount = 0
    },
    bait = {
        running = false,
        lastPurchaseTime = 0,
        purchaseCount = 0
    },
    statsUpdateConnection = nil
}

local function getHighestOwnedRod()
    if not PlayerData then return nil end

    local rodOrder = {
        "Flimsy Rod", "Training Rod", "Plastic Rod", "Lucky Rod",
        "Kings Rod", "Magnet Rod", "Rapid Rod", "Fast Rod",
        "Carbon Rod", "Long Rod", "Mythical Rod", "Midas Rod",
        "Trident Rod", "Enchanted Altar", "Rod Of The Depths",
        "Scurvy Rod", "Destiny Rod", "No-Life Rod", "King's Rod",
        "Aurora Rod", "Rod Of The Eternal King", "Sunken Rod",
        "Phoenix Rod"
    }

    local success, inventory = pcall(function()
        return PlayerData:GetExpect("Inventory")["Fishing Rods"]
    end)

    if not success or not inventory then
        return nil
    end

    for i = #rodOrder, 1, -1 do
        local rodName = rodOrder[i]
        for uuid, item in pairs(inventory) do
            if item.id == rodName then
                return rodName, i
            end
        end
    end

    return nil
end

local function getHighestOwnedBait()
    if not PlayerData then return nil end

    local baitOrder = {
        "Magnet", "Rapid Catcher", "Worm", "Cricket", "Leech",
        "Minnow", "Bagel", "Shrimp", "Fish Head", "Night Shrimp",
        "Truffle Worm", "Weird Algae", "Seaweed", "Coral",
        "Jellyfish", "Instant Soda", "Deep Coral"
    }

    local success, inventory = pcall(function()
        return PlayerData:GetExpect("Inventory")["Baits"]
    end)

    if not success or not inventory then
        return nil
    end

    for i = #baitOrder, 1, -1 do
        local baitName = baitOrder[i]
        for uuid, item in pairs(inventory) do
            if item.id == baitName then
                return baitName, i
            end
        end
    end

    return nil
end

local function purchaseRod(rodName)
    local PurchaseRodEvent = Net["RF/PurchaseRod"]

    local success, result = pcall(function()
        return PurchaseRodEvent:InvokeServer(rodName)
    end)

    return success and result
end

local function purchaseBait(baitName)
    local PurchaseBaitEvent = Net["RF/PurchaseBait"]

    local success, result = pcall(function()
        return PurchaseBaitEvent:InvokeServer(baitName)
    end)

    return success and result
end

local function autoUpgradeRodLoop()
    while _G.AUTO_UPGRADE_ROD_ENABLED and upgradeState.rod.running do
        local currentRod, currentIndex = getHighestOwnedRod()

        if currentIndex then
            local rodOrder = {
                "Flimsy Rod", "Training Rod", "Plastic Rod", "Lucky Rod",
                "Kings Rod", "Magnet Rod", "Rapid Rod", "Fast Rod",
                "Carbon Rod", "Long Rod", "Mythical Rod", "Midas Rod",
                "Trident Rod", "Enchanted Altar", "Rod Of The Depths",
                "Scurvy Rod", "Destiny Rod", "No-Life Rod", "King's Rod",
                "Aurora Rod", "Rod Of The Eternal King", "Sunken Rod",
                "Phoenix Rod"
            }

            if currentIndex < #rodOrder then
                local nextRod = rodOrder[currentIndex + 1]
                local success = purchaseRod(nextRod)

                if success then
                    upgradeState.rod.purchaseCount = upgradeState.rod.purchaseCount + 1
                    upgradeState.rod.lastPurchaseTime = tick()
                    print(string.format("âœ… [Auto Upgrade Rod] Purchased: %s", nextRod))
                end
            end
        end

        task.wait(10)
    end
end

local function autoUpgradeBaitLoop()
    while _G.AUTO_UPGRADE_BAIT_ENABLED and upgradeState.bait.running do
        local currentBait, currentIndex = getHighestOwnedBait()

        if currentIndex then
            local baitOrder = {
                "Magnet", "Rapid Catcher", "Worm", "Cricket", "Leech",
                "Minnow", "Bagel", "Shrimp", "Fish Head", "Night Shrimp",
                "Truffle Worm", "Weird Algae", "Seaweed", "Coral",
                "Jellyfish", "Instant Soda", "Deep Coral"
            }

            if currentIndex < #baitOrder then
                local nextBait = baitOrder[currentIndex + 1]
                local success = purchaseBait(nextBait)

                if success then
                    upgradeState.bait.purchaseCount = upgradeState.bait.purchaseCount + 1
                    upgradeState.bait.lastPurchaseTime = tick()
                    print(string.format("âœ… [Auto Upgrade Bait] Purchased: %s", nextBait))
                end
            end
        end

        task.wait(10)
    end
end

local function startUpgradeStatsUpdater()
    if upgradeState.statsUpdateConnection then
        return
    end

    upgradeState.statsUpdateConnection = RunService.Heartbeat:Connect(function()
    end)
end

local function stopUpgradeStatsUpdater()
    if upgradeState.statsUpdateConnection then
        upgradeState.statsUpdateConnection:Disconnect()
        upgradeState.statsUpdateConnection = nil
    end
end

function startAutoUpgradeRod()
    if upgradeState.rod.running then
        print("âš ï¸ Auto Upgrade Rod already running")
        return
    end

    _G.AUTO_UPGRADE_ROD_ENABLED = true
    upgradeState.rod.running = true
    print("âœ… Auto Upgrade Rod ENABLED")

    task.spawn(autoUpgradeRodLoop)
    startUpgradeStatsUpdater()
end

function stopAutoUpgradeRod()
    _G.AUTO_UPGRADE_ROD_ENABLED = false
    upgradeState.rod.running = false
    if not _G.AUTO_UPGRADE_BAIT_ENABLED then
        stopUpgradeStatsUpdater()
    end
end

function startAutoUpgradeBait()
    if upgradeState.bait.running then
        print("âš ï¸ Auto Upgrade Bait already running")
        return
    end

    _G.AUTO_UPGRADE_BAIT_ENABLED = true
    upgradeState.bait.running = true
    print("âœ… Auto Upgrade Bait ENABLED")

    task.spawn(autoUpgradeBaitLoop)
    startUpgradeStatsUpdater()
end

function stopAutoUpgradeBait()
    _G.AUTO_UPGRADE_BAIT_ENABLED = false
    upgradeState.bait.running = false
    if not _G.AUTO_UPGRADE_ROD_ENABLED then
        stopUpgradeStatsUpdater()
    end
end

print("âœ… Auto Upgrade System loaded\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 8: AUTO FARM CORE FUNCTIONS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading Auto Farm core functions...")

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- AUTO FARM: Core Fishing Functions
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function equip_tool()
    EquipToolEvent:FireServer(1)
end

function charge_rod()
    -- Simple charge - just sync server time
    local serverTime = workspace:GetServerTimeNow()
    local success, adjustedTime = ChargeEvent:InvokeServer(nil, nil, nil, serverTime)

    return success, adjustedTime
end

function request_fishing()
    local serverTime = workspace:GetServerTimeNow()
    local posY = math.random() * 2 - 1  -- Random -1 to 1
    local power = math.random()  -- Random 0 to 1

    return RequestEvent:InvokeServer(posY, power, serverTime)
end

function fishing_completed()
    CompletedEvent:FireServer()
end

function cancel_inputs_bypass()
    task.spawn(function()
        CancelEvent:InvokeServer()
    end)
end

print("âœ… Fishing functions loaded")

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- AUTO FARM: Main Loop
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

_G.MAIN_LOOP_RUNNING = false

function runMainLoop()
    if _G.MAIN_LOOP_RUNNING then
        return
    end

    _G.MAIN_LOOP_RUNNING = true

    local cycleCount = 0
    local successCount = 0

    while _G.MAIN_LOOP_RUNNING do
        -- Wait for farm to be enabled
        while not _G.AUTO_FARM_ENABLED and _G.MAIN_LOOP_RUNNING do
            task.wait(0.5)
        end

        if not _G.MAIN_LOOP_RUNNING then break end
        if not _G.AUTO_FARM_ENABLED then continue end

        cycleCount = cycleCount + 1

        -- Fishing cycle
        equip_tool()
        charge_rod()
        task.wait(0.01)  -- Small delay for server sync

        local success, result = request_fishing()

        if success then
            successCount = successCount + 1
            task.wait(_G.FARM_SUCCESS_DELAY)
            fishing_completed()
        end

        task.wait(0.2)
        cancel_inputs_bypass()
        task.wait(0.01)
    end

    -- Cleanup
    stopReelIntermissionLoop()
    _G.MAIN_LOOP_RUNNING = false
end

print("âœ… Auto farm V1 module ready\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 2.4: AUTO FARM V2 MODULE (JUNG V2 - FAST)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--[[
    Auto Farm V2 Module - Jung V2 fast auto farm logic

    Features:
    - Independent main loop (doesn't wait for completion)
    - Server-based completion handler (parallel)
    - Ping compensation system (auto-adjust delays)
    - Fixed parameters: RequestFishingMinigame(-1, 0) for OK rating
    - Custom delays: Delay Reel + Delay Complete

    Key Functions:
    - startAutoFarmV2() - Start Jung V2 auto farm
    - stopAutoFarmV2() - Stop Jung V2 auto farm
    - mainFishingLoopV2() - Main independent loop
]]

print("ğŸ“¦ Loading Auto Farm V2 (Jung V2 - Fast)...")

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- AUTO FARM V2: Ping Compensation (REMOVED IN v6.6.2)
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- Ping compensation system has been removed to eliminate the infinite loop
-- that was causing minor CPU overhead (~0.2-0.3%)

print("âœ… Ping compensation system removed (v6.6.2 optimization)")

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- AUTO FARM V2: Fish Caught Listener
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

local fishNotificationEvent = Net["RE/ObtainedNewFishNotification"]
fishNotificationEvent.OnClientEvent:Connect(function(fishId, fishData, itemData, isNew)
    -- Fish caught tracking removed in v6.6 for memory optimization
    -- Update session stats for GPU Saver white screen
    sessionStats.totalFish = sessionStats.totalFish + 1
end)

print("âœ… Fish caught listener ready")

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- AUTO FARM V2: Main Loop Logic
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

local function mainFishingLoopV2()
    local State = _G.JUNG_V2_STATE

    while State.isRunning do
        task.wait(State.baseDelayReel)

        if not State.isRunning then break end

        State.cycleCount = State.cycleCount + 1

        -- Step 1: Cancel
        pcall(function()
            CancelEvent:InvokeServer()
        end)
        task.wait(0.01)

        -- Step 2: Charge
        pcall(function()
            local timestamp = workspace:GetServerTimeNow()
            ChargeEvent:InvokeServer(timestamp)
        end)
        task.wait(0.01)

        -- Step 3: Request (with server return handler)
        task.spawn(function()
            local success, result = pcall(function()
                return RequestEvent:InvokeServer(-1, 0)
            end)

            if success and result then
                State.totalRequests = State.totalRequests + 1

                task.spawn(function()
                    State.pendingCompletes = State.pendingCompletes + 1
                    task.wait(State.baseDelayComplete)

                    pcall(function()
                        CompletedEvent:FireServer()
                    end)

                    State.pendingCompletes = State.pendingCompletes - 1
                end)
            end
        end)
    end
end

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- AUTO FARM V2: Start/Stop Functions
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function startAutoFarmV2()
    local State = _G.JUNG_V2_STATE

    if State.isRunning then
        return
    end

    -- Stop V1 if running
    if _G.AUTO_FARM_ENABLED then
        _G.AUTO_FARM_ENABLED = false
    end

    State.isRunning = true
    State.fishCaught = 0
    State.cycleCount = 0
    State.totalRequests = 0
    State.pendingCompletes = 0
    State.startTime = tick()

    -- Stop animations
    startReelIntermissionLoop()

    -- Ping compensation removed in v6.6.2

    -- Equip rod
    pcall(function()
        EquipToolEvent:FireServer(1)
    end)
    task.wait(0.5)

    task.spawn(mainFishingLoopV2)
end

function stopAutoFarmV2()
    local State = _G.JUNG_V2_STATE

    if not State.isRunning then
        return
    end

    State.isRunning = false
    stopReelIntermissionLoop()
end

print("âœ… Auto Farm V2 module ready\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 2.6: AUTO SELL MODULE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--[[
    Auto Sell Module - Automatic item selling with custom delay

    Key Functions:
    - startAutoSell() - Start auto sell loop
    - stopAutoSell() - Stop auto sell loop
    - runAutoSellLoop() - Main selling loop
]]

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- AUTO SELL: State Variables
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

local isAutoSellRunning = false

-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- AUTO SELL: Main Functions
-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

local function runAutoSellLoop()
    if isAutoSellRunning then
        print("âš ï¸ Auto Sell loop already running!")
        return
    end

    isAutoSellRunning = true
    print(string.rep("=", 70))
    print("ğŸ’° AUTO SELL LOOP - STARTING")
    print(string.rep("=", 70) .. "\n")

    local cycleCount = 0
    local sellSuccessCount = 0
    local sellFailCount = 0

    -- Get SellAllItems event
    local SellAllItemsEvent = Net["RF/SellAllItems"]

    while isAutoSellRunning and _G.AUTO_SELL_ENABLED do
        cycleCount = cycleCount + 1

        print(string.format("[Auto Sell #%d] ğŸ’° Attempting to sell all items...", cycleCount))

        -- Invoke sell event
        local success, result = pcall(function()
            return SellAllItemsEvent:InvokeServer()
        end)

        if success then
            if result then
                sellSuccessCount = sellSuccessCount + 1
                print(string.format("[Auto Sell #%d] âœ… Items sold successfully", cycleCount))
            else
                sellFailCount = sellFailCount + 1
                print(string.format("[Auto Sell #%d] âš ï¸ No items to sell or sell failed", cycleCount))
            end
        else
            sellFailCount = sellFailCount + 1
            warn(string.format("[Auto Sell #%d] âŒ Error selling items: %s", cycleCount, tostring(result)))
        end

        -- Stats every 5 cycles
        if cycleCount % 5 == 0 then
            print(string.format("\nğŸ“Š [AUTO SELL STATS] Cycles: %d | Success: %d | Failed: %d | Delay: %ds | Status: %s\n",
                cycleCount,
                sellSuccessCount,
                sellFailCount,
                _G.AUTO_SELL_DELAY,
                _G.AUTO_SELL_ENABLED and "ğŸŸ¢ ON" or "ğŸ”´ OFF"
            ))
        end

        -- Wait for the specified delay
        local delayRemaining = _G.AUTO_SELL_DELAY
        while delayRemaining > 0 and isAutoSellRunning and _G.AUTO_SELL_ENABLED do
            task.wait(1)
            delayRemaining = delayRemaining - 1
        end
    end

    -- Cleanup
    print("\n" .. string.rep("=", 70))
    print("ğŸ›‘ AUTO SELL LOOP STOPPED")
    print(string.rep("=", 70))
    if cycleCount > 0 then
        print(string.format("\nğŸ“Š FINAL STATS: %d cycles | %d success | %d failed\n",
            cycleCount, sellSuccessCount, sellFailCount))
    end

    isAutoSellRunning = false
end

local function startAutoSell()
    if _G.AUTO_SELL_ENABLED then
        print("âš ï¸ Auto Sell already enabled!")
        return
    end

    print("\nğŸ’° Starting Auto Sell...")
    _G.AUTO_SELL_ENABLED = true

    -- Start the auto sell loop
    if not isAutoSellRunning then
        task.spawn(runAutoSellLoop)
    end

    print(string.format("âœ… Auto Sell ENABLED (Delay: %ds)\n", _G.AUTO_SELL_DELAY))
end

local function stopAutoSell()
    if not _G.AUTO_SELL_ENABLED then
        print("âš ï¸ Auto Sell already stopped!")
        return
    end

    print("\nğŸ›‘ Stopping Auto Sell...")
    _G.AUTO_SELL_ENABLED = false

    print("âœ… Auto Sell stopped successfully\n")
end

print("âœ… Auto sell module ready\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 9: AUTO WEATHER MODULE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading Auto Weather module...")

local isAutoWeatherRunning = false
local weatherCycle = {"Wind", "Cloudy", "Storm"}
local currentWeatherIndex = 1

local function runAutoWeatherLoop()
    if isAutoWeatherRunning then
        print("âš ï¸ Auto Weather loop already running!")
        return
    end

    isAutoWeatherRunning = true
    print(string.rep("=", 70))
    print("ğŸŒ¦ï¸ AUTO WEATHER LOOP - STARTING")
    print(string.rep("=", 70) .. "\n")

    local PurchaseWeatherEvent = Net["RF/PurchaseWeather"]
    local cycleCount = 0

    while isAutoWeatherRunning and _G.AUTO_WEATHER_ENABLED do
        cycleCount = cycleCount + 1

        local weatherToBuy = weatherCycle[currentWeatherIndex]
        print(string.format("[Auto Weather #%d] ğŸŒ¦ï¸ Purchasing: %s", cycleCount, weatherToBuy))

        local success, result = pcall(function()
            return PurchaseWeatherEvent:InvokeServer(weatherToBuy)
        end)

        if success then
            print(string.format("[Auto Weather #%d] âœ… Weather purchased: %s", cycleCount, weatherToBuy))
        else
            warn(string.format("[Auto Weather #%d] âŒ Failed to purchase %s: %s", cycleCount, weatherToBuy, tostring(result)))
        end

        currentWeatherIndex = currentWeatherIndex + 1
        if currentWeatherIndex > #weatherCycle then
            currentWeatherIndex = 1
        end

        local delayRemaining = _G.WEATHER_PURCHASE_DELAY
        while delayRemaining > 0 and isAutoWeatherRunning and _G.AUTO_WEATHER_ENABLED do
            task.wait(1)
            delayRemaining = delayRemaining - 1
        end
    end

    print("\n" .. string.rep("=", 70))
    print("ğŸ›‘ AUTO WEATHER LOOP STOPPED")
    print(string.rep("=", 70))

    isAutoWeatherRunning = false
end

local function startAutoWeather()
    if _G.AUTO_WEATHER_ENABLED then
        print("âš ï¸ Auto Weather already enabled!")
        return
    end

    print("\nğŸŒ¦ï¸ Starting Auto Weather...")
    _G.AUTO_WEATHER_ENABLED = true

    if not isAutoWeatherRunning then
        task.spawn(runAutoWeatherLoop)
    end

    print(string.format("âœ… Auto Weather ENABLED (Delay: %ds)\n", _G.WEATHER_PURCHASE_DELAY))
end

local function stopAutoWeather()
    if not _G.AUTO_WEATHER_ENABLED then
        print("âš ï¸ Auto Weather already stopped!")
        return
    end

    print("\nğŸ›‘ Stopping Auto Weather...")
    _G.AUTO_WEATHER_ENABLED = false

    print("âœ… Auto Weather stopped successfully\n")
end

print("âœ… Auto weather module ready\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 10: MISC FEATURES (Remove Islands, Unlock FPS)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading Misc features...")

-- Remove Islands
if _G.REMOVE_ISLANDS_ENABLED then
    task.spawn(function()
        local islands = Workspace:FindFirstChild("Islands")
        if islands then
            islands:Destroy()
            print("âœ… Islands removed")
        end
    end)
end

-- Unlock FPS
if _G.UNLOCK_FPS_ENABLED then
    task.spawn(function()
        setfpscap(240)
        print("âœ… FPS unlocked (240)")
    end)
end

print("âœ… Misc features loaded\n")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SECTION 11: AUTO-START SYSTEM
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ“¦ Loading auto-start system...")

local function startEnabledModules()
    print("\n" .. string.rep("=", 80))
    print("ğŸš€ STARTING ENABLED MODULES...")
    print(string.rep("=", 80) .. "\n")

    -- Freeze Character
    if _G.FREEZE_CHAR_ENABLED then
        pcall(function()
            startFreeze()
        end)
    end

    -- GPU Saver
    if _G.GPU_SAVER_ENABLED then
        pcall(function()
            startGPUSaver()
        end)
    end

    -- Disable Animations
    if _G.DISABLE_ANIMATIONS_ENABLED then
        pcall(function()
            startDisableAnimations()
        end)
    end

    -- Auto Upgrade Rod
    if _G.AUTO_UPGRADE_ROD_ENABLED then
        pcall(function()
            startAutoUpgradeRod()
        end)
    end

    -- Auto Upgrade Bait
    if _G.AUTO_UPGRADE_BAIT_ENABLED then
        pcall(function()
            startAutoUpgradeBait()
        end)
    end

    -- Auto Weather
    if _G.AUTO_WEATHER_ENABLED then
        pcall(function()
            startAutoWeather()
            print("âœ… Auto Weather started")
        end)
    end

    -- Auto Sell
    if _G.AUTO_SELL_ENABLED then
        pcall(function()
            startAutoSell()
            print("âœ… Auto Sell started")
        end)
    end

    -- Auto Farm (V1 or V2, not both)
    if _G.AUTO_FARM_V2_ENABLED then
        pcall(function()
            startAutoFarmV2()
            print("âœ… Auto Farm V2 (Jung Fast) started")
        end)
    elseif _G.AUTO_FARM_ENABLED then
        pcall(function()
            startAutoFarm()
            print("âœ… Auto Farm V1 started")
        end)
    end

    print("\n" .. string.rep("=", 80))
    print("âœ… ALL ENABLED MODULES STARTED!")
    print(string.rep("=", 80))
end

-- Helper functions for Auto Farm V1
local function stopAutoFarm()
    _G.AUTO_FARM_ENABLED = false
    task.spawn(function()
        pcall(function()
            CancelEvent:InvokeServer()
        end)
    end)
end

local function startAutoFarm()
    _G.AUTO_FARM_ENABLED = true
    startReelIntermissionLoop()
    if not _G.MAIN_LOOP_RUNNING then
        task.spawn(runMainLoop)
    end
end

-- ReelIntermission loop (for animation blocking)
_G.REEL_INTERMISSION_RUNNING = false

function startReelIntermissionLoop()
    if _G.REEL_INTERMISSION_RUNNING then return end
    _G.REEL_INTERMISSION_RUNNING = true

    task.spawn(function()
        while _G.REEL_INTERMISSION_RUNNING do
            pcall(function()
                local char = player.Character
                if char then
                    local humanoid = char:FindFirstChildWhichIsA("Humanoid")
                    if humanoid then
                        local animator = humanoid:FindFirstChildWhichIsA("Animator")
                        if animator then
                            for _, track in ipairs(animator:GetPlayingAnimationTracks()) do
                                if track.Animation and track.Animation.Name == "ReelIntermission" then
                                    track:Stop(0)
                                end
                            end
                        end
                    end
                end
            end)
            task.wait(0.1)
        end
    end)
end

function stopReelIntermissionLoop()
    _G.REEL_INTERMISSION_RUNNING = false
end

-- Execute auto-start
task.spawn(function()
    task.wait(3)
    startEnabledModules()
end)

print("âœ… Auto-start system initialized\n")
